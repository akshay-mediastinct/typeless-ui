<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Sharing | Typeless.</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">

	<link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

</head>

<body>

	<span id="modal-windows-1">
		<!-- loaded dinamically -->
	</span>
	
	<span id="modal-windows-2">
		<!-- loaded dinamically -->
	</span>

	<div id="notify-wrapper">
		<span class="" style="display:none;right: 15px;top: 82px;position: absolute;" id="timeout-alert">
			<div class="alert alert-dismissible">
				<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<span id="alert-text"></span><a class="alert-link" href="#"> <i class="fa fa-undo"></i> Undo</a>
			</div>
		</span>
	</div>
	
	<nav class="navbar navbar-fixed-top white-bg" role="navigation" id="navbar-top">
		<!-- loaded dinamically -->
	</nav>
	
	<!-- this next nav needs margin-top 64px if no following wrapper with margin-top of 64px exists -->
	<nav class="navbar-default navbar-static-side" role="navigation" style="position:fixed;" id="navbar-side">
		<!-- loaded dinamically -->	
	</nav>
	
				
    <div id="wrapper" >
        
        <div id="page-wrapper" class="white-bg top-navbar" style="margin-top:64px">	

			<div class="row no-margins" id="alerts-row">

			</div>
			
			<div class="row wrapper white-bg page-heading">
            	<span id="tools" style="">
					
				</span>
            </div>

			<div class="wrapper wrapper-content animated fadeIn" >
			
				<div class="hide-below-990 p-m click-share-notice">
					<i class="fa fa-level-down fa-rotate-180 fa-3x pull-left text-info" style=""></i>
					Click on the share contacts button to send invitations for sharing your contact book.
				</div>
						
				<div class="row">
					<div class="row m-l">
						<div class="col-md-6 no-padding">
							<div class="sharing-title">Sharing
								<button class="btn btn-xs empty">empty</button>
								<button class="btn btn-xs nothing">nothing</button>
							</div>
							
							<p class="m-t">Typeless lets you share your contact book with anyone, even if they are not in Typeless yet.
							Sent and received invitations to share contact books can be managed in this page.</p>

						</div>
						
					</div>
					<div class="m-l m-r m-t">
						<table class="table">
							<thead>
								<tr class="va-middle text-gray text-uppercase" style="background-color:whitesmoke;">
									<span class="sharing-subtitle">Received</span>
									<td class="" style="width:3%"></td>
									<td class="col-md-3">name & e-mail</td>
									<td class="col-md-1">contacts</td>
									<td class="col-md-2">details shared</td>
									<td class="col-md-1"></td>
									<td class="col-md-2 text-right">status</td>
								</tr>
							</thead>
							<tbody>
								<tr class="va-middle">
									<td ><img alt="image" class="img-circle m-l-sm" src="img/profile.jpg" style="width:38px;height:38px"></td>
									<td class="">Virgina Bravo<span class="label pull-right m-t-sm">PENDING</span><br><span class="small text-gray">virginia.madsen@gmail.com</span></td>
									<td class="">345</td>
									<td class="">Names and job titles</td>
									<td class="">
										<div class="btn-group">
											<button data-toggle="dropdown" class="btn btn-link btn-link-no-hover  text-primary dropdown-toggle">
												<small>ACTIONS</small> <span class="caret"></span>
											</button>
											<ul class="dropdown-menu">
												<li><a class="action accept" href="#"><i class="fa fa-check fa-fw "></i> ACCEPT</a></li>
												<li><a class="action decline" href="#"><i class="fa fa-times fa-fw"></i> DECLINE</a></li>
											</ul>
										</div>
									</td>
									<td class="text-gray text-right status small">Received 2 min ago</td>
								</tr>
								<tr class="va-middle">
									<td><img alt="image" class="img-circle m-l-sm" src="img/a3.jpg" style="width:38px;height:38px"></td>
									<td class="">Alba Andersen<br><span class="small text-gray">a.andersen80@gmail.com</span></td>
									<td class="">1.209</td>
									<td class="">Everything</td>
									<td class="">
																			
										<div class="btn-group">
											<button data-toggle="dropdown" class="btn btn-link btn-link-no-hover text-primary dropdown-toggle">
												<small>ACTIONS</small> <span class="caret"></span>
											</button>
											<ul class="dropdown-menu">
												<li><a class="action stop" href="#"><i class="fa fa-ban fa-fw action stop"></i> STOP SHARING</a></li>
											</ul>
										</div>
										
									</td>
									<td class="text-gray text-right status small">Accepted 6 days ago</td>
								</tr>
							</tbody>
						</table>
						<div class="text-center show-on-empty m-t-lg" style="display:none">
							
							<div class="well well-sm small" style="display:inline">
								Received invitations will appear here.
							</div>
							
						</div>
					</div>
					<div class="m-l m-r m-t">
						<table class="table m-b-xs">
							<thead>
								<tr class="va-middle text-gray text-uppercase" style="background-color:whitesmoke">
									<span class="sharing-subtitle">Sent</span>
									<td class="" style="width:3%"></td>
									<td class="col-md-3">name & e-mail</td>
									<td class="col-md-1">contacts</td>
									<td class="col-md-2">details shared</td>
									<td class="col-md-1"></td>
									<td class="col-md-2 text-right">status</td>
								</tr>
							</thead>
							<tbody>
								<tr class="va-middle">
									<td><img alt="image" class="img-circle m-l-sm" src="img/a1.jpg" style="width:38px;height:38px"></td>
									<td class="">Javier Ramírez<span class="label pull-right m-t-sm">PENDING</span><br><span class="small text-gray">j.ramirez@microsoft.com</span></td>
									<td class="">1.832</td>
									<td class="">Names and job titles</td>
									<td class="">
									
										<div class="btn-group">
											<button data-toggle="dropdown" class="btn btn-link btn-link-no-hover  text-primary dropdown-toggle">
												<small>ACTIONS</small> <span class="caret"></span>
											</button>
											<ul class="dropdown-menu">
												<li><a class="action edit" href="#"><i class="fa fa-pencil fa-fw action edit"></i> EDIT</a></li>
												<li><a class="action resend" href="#"><i class="fa fa-send fa-fw action send"></i> RE-SEND</a></li>
												<li><a class="action stop" href="#"><i class="fa fa-ban fa-fw action stop"></i> STOP SHARING</a></li>
											</ul>
										</div>
									
									</td>
									<td class="text-gray text-right status small">Sent 2 h ago</td>
								</tr>
								<tr class="va-middle">
									<td><img alt="image" class="img-circle m-l-sm" src="img/a4.jpg" style="width:38px;height:38px"></td>
									<td class="">Raúl López<br><span class="small text-gray">raul@avanza.es</span></td>
									<td class="">2.793</td>
									<td class="">Everything</td>
									<td class="">
									
										<div class="btn-group">
											<button data-toggle="dropdown" class="btn btn-link btn-link-no-hover  text-primary dropdown-toggle">
												<small>ACTIONS</small> <span class="caret"></span>
											</button>
											<ul class="dropdown-menu">
												<li><a class="action edit" href="#"><i class="fa fa-pencil fa-fw action edit"></i> EDIT</a></li>
												<li><a class="action stop" href="#"><i class="fa fa-ban fa-fw action stop"></i> STOP SHARING</a></li>
											</ul>
										</div>
										
									</td>
									<td class="text-gray text-right status small">Accepted 2 days ago</td>
								</tr>
								<tr class="va-middle excess" style="display:none">
									<td><img alt="image" class="img-circle m-l-sm" src="img/a2.jpg" style="width:38px;height:38px"></td>
									<td class="">Pedro Ferrán<br><span class="small text-gray">pedro@todos.es</span></td>
									<td class="">660</td>
									<td class="">Everything</td>
									<td class="">
									
										<div class="btn-group">
											<button data-toggle="dropdown" class="btn btn-link btn-link-no-hover text-primary dropdown-toggle">
												<small>ACTIONS</small> <span class="caret"></span>
											</button>
											<ul class="dropdown-menu">
												<li><a class="action edit" href="#"><i class="fa fa-pencil fa-fw action edit"></i> EDIT</a></li>
												<li><a class="action stop" href="#"><i class="fa fa-ban fa-fw action stop"></i> STOP SHARING</a></li>
											</ul>
										</div>
										
									</td>
									<td class="text-gray text-right status small">Accepted 2 days ago</td>
								</tr>
							</tbody>
						</table>
						<div class="text-center show-on-empty m-t-lg" style="display:none">
							
							<div class="well well-sm small" style="display:inline-block">
								Invitations sent by you will appear here.<br>
								Click on <i class="fa fa-share-alt"></i> share contacts button up in the bar to send an invitation.
							</div>
							
						</div>
						
						<button class="btn btn-white btn-sm btn-outline more pull-right" type="button"><i class="fa fa-arrow-down fa-fw"></i> <small>SHOW MORE</small></button>
						<button class="btn btn-white btn-sm btn-outline less pull-right" type="button" style="display:none"><i class="fa fa-arrow-up fa-fw"></i> <small>SHOW LESS</small></button>
						
					</div>
					<div class="m-l m-r m-t">
						<table class="table table-removed">
							<thead>
								<tr class="va-middle text-gray text-uppercase" style="background-color:whitesmoke">
									<span class="sharing-subtitle">Removed</span>
									<td class="" style="width:3%"></td>
									<td class="col-md-3">name & e-mail</td>
									<td class="col-md-1">contacts</td>
									<td class="col-md-2">details shared</td>
									<td class="col-md-1"></td>
									<td class="col-md-2 text-right">status</td>
								</tr>
							</thead>
							<tbody>
								<tr class="va-middle">
									<td><img alt="image" class="img-circle m-l-sm" src="img/a5.jpg" style="width:38px;height:38px"></td>
									<td class="">Shawn Lee<br><span class="small text-gray">hello@gmail.com</span></td>
									<td class="">3.032</td>
									<td class="">Names and job titles</td>
									<td class="">
										<div class="btn-group">
											<button data-toggle="dropdown" class="btn btn-link btn-link-no-hover text-primary dropdown-toggle">
												<small>ACTIONS</small> <span class="caret"></span>
											</button>
											<ul class="dropdown-menu">
												<li><a class="action resend"  href="#"><i class="fa fa-send fa-fw action send"></i> RE-SEND</a></li>
												<li><a class="action edit" href="#"><i class="fa fa-pencil fa-fw action edit"></i> EDIT</a></li>
												<li><a class="action delete" href="#"><i class="fa fa-trash fa-fw action delete"></i> DELETE</a></li>
											</ul>
										</div>
									</td>
									<td class="text-gray text-right status small">Stopped sharing 1 week ago</td>
								</tr>
								<tr class="va-middle">
									<td><img alt="image" class="img-circle m-l-sm" src="img/a6.jpg" style="width:38px;height:38px"></td>
									<td class="">Rihanna Jayakumar<br><span class="small text-gray">rihanna@whatshappening.com</span></td>
									<td class="">325</td>
									<td class="">Everything</td>
									<td class="">
										<div class="btn-group">
											<button data-toggle="dropdown" class="btn btn-link btn-link-no-hover text-primary dropdown-toggle">
												<small>ACTIONS</small> <span class="caret"></span>
											</button>
											<ul class="dropdown-menu">
												<li><a class="action resend" href="#"><i class="fa fa-send fa-fw action send"></i> RE-SEND</a></li>
												<li><a class="action edit" href="#"><i class="fa fa-pencil fa-fw action edit"></i> EDIT</a></li>
												<li><a class="action delete" href="#"><i class="fa fa-trash fa-fw action delete"></i> DELETE</a></li>
											</ul>
										</div>
										
									</td>
									<td class="text-gray text-right status small">Declined 6 days ago</td>
								</tr>
							</tbody>
						</table>
						<div class="text-center show-on-empty m-t-lg" style="display:none">
							
							<div class="well well-sm small" style="display:inline">
								Invitations declined by others and invitations that you have stopped sharing with others will appear here.
							</div>
							
						</div>
					</div>
				</div>
			</div>
			
			<div class="footer fixed_full custom-footer" id="footer">
				
				<!-- loaded dinamically -->

			</div>

		</div>	
		
    </div>
	
	

    <!-- Mainly scripts -->
    <script src="js/jquery-1.10.2.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>

    <!-- Custom and plugin javascript -->
    <!-- <script src="js/typeless.js"></script> -->
    <!-- <script src="js/plugins/pace/pace.min.js"></script>	 -->
	
	<!-- Flot -->
    <script src="js/plugins/flot/jquery.flot.js"></script>
    <script src="js/plugins/flot/jquery.flot.tooltip.min.js"></script>
    <script src="js/plugins/flot/jquery.flot.resize.js"></script>
	
	<!-- EayPIE -->
    <script src="js/plugins/easypiechart/jquery.easypiechart.js"></script>



    <script>
        $(document).ready(function() {
		
			// loading of components and callbacks		
			$( "#footer" ).load( "components.html #footer" );
			$( "#navbar-side" ).load( "components.html #navbar-side", afterLoadingNavbarSide );
			$( "#navbar-top" ).load( "components.html #navbar-top", afterLoadingNavbarTop );
			
			$( "#modal-windows-1").load( "components.html #edit-invitation-modal", afterLoadingModal);
			
			
						
			// callback after loading navbar-top
			function afterLoadingNavbarTop(){
				/* Placeholder for search bar. Put here for future customisation,
				   always opt in for the javascript code if available and reasonably human readable */			
				// $('#top-search').attr('placeholder','Search for people, jobs, companies & more');  /* jQuery */			
				document.getElementById("top-search").placeholder = "Search for people, jobs, companies & more"; /* javascript */	
			
				// Activate tooltips
				$("[data-tooltip='tooltip']").tooltip();
				
				// Share contacts button context-aware
					
					// Content of the button
					$( "#share-contacts-btn" ).html("<i class=\"fa fa-share-alt\"></i><span class=\"m-l-sm\"><small>SHARE CONTACTS</small></span>");
				
					// Target of the button
					// I will take down this feature for this page, I'd rather show other modals
					$( "#share-contacts-btn" ).attr('data-toggle','');
					//$( "#share-contacts-btn" ).attr('data-target','#share-contacts-modal-regular');
				
			};
			
			// callback after loading navbar-side
			function afterLoadingNavbarSide(){
				// MetsiMenu
				// (We may need it in the future)
				$('#side-menu').metisMenu();
				
				// inactive all options
				$('#side-menu li').each(function(index, element) {
                    $(this).removeClass('active');
					//console.log($(this).text());
                });
				
				// active actual option
				//$('#connected-accounts-menu').addClass('active');
				//$('#connected-accounts-menu ul').addClass('collapse in');
				
				$('#sharing-menu>ul').addClass('collapase in');
				$('#sharing-menu').addClass('active');
				$('#sharing-friends-link').addClass('active');
				
			};
			
			function afterLoadingModal(){
			
				// functionality for show more/less accounts in the modal
			
				// Show when user has 6 or more accounts
				// Only 5 are shown
				
				$('.more-accounts').click(function(){
					console.log('is this workin?');
					self = $(this);
					self.fadeOut('fast',function(){
						self.next('.less-accounts').fadeIn('slow');
					});
					$('div.excess').show('slow');
					
				});
				
				$('.less-accounts').click(function(){
					self = $(this);
					self.fadeOut('fast',function(){
						self.prev('.more-accounts').fadeIn('slow');
					});
					$('div.excess').hide('slow');
				});
				
			};
			
			function showAlert(text, alertColor){
			
				if (!alertColor)
					$('#timeout-alert div.alert').addClass('alert-success');
				else
					$('#timeout-alert div.alert').addClass('alert-'+alertColor);
			
				$('#timeout-alert div.alert span#alert-text').text(text);
				$('#timeout-alert').fadeIn('slow');
				$('#timeout-alert').css('display','inline-block');
				
				
				setTimeout(function(){
					$('#timeout-alert').fadeOut('slow', function(){
						$('#timeout-alert div.alert').removeClass('alert-success');
						$('#timeout-alert div.alert').removeClass('alert-'+alertColor);
					});
				}, 5000);
				
			};
		
			// functionality for menu actions
			$('.action').click(function(){
			
				self = $(this);
			
				if (self.hasClass('accept')) {
				
					// Animations to do:
					// 1.- Show ongoing status on alert and status and change row color to green, wait 5 s
					
					showAlert("Accepting invitation...");
					self.parents('tr').addClass('success');
					self.parents('tr').children('.status').text('Accepting...');
					
					// 2.- Change status to accepted and change row color to default, wait 1 s
					
					setTimeout(function(){
						self.parents('tr').children('.status').text('Accepted 5 s ago');
						self.parents('tr').removeClass('success');
					},5000);
					
					// We also have to change menu items (actions) when status changes.
					// (i.e. actions for received status are accept and decline, but actions
					// for accepted status is just stop sharing).
					// Not needed for mock up purposes
					
					self.parents('.btn-group').children('.dropdown-toggle').dropdown('toggle'); // > For closing the dropdown menu after click
					return false; // > Just for avoiding going top of the page
					
					}
				
				if (self.hasClass('decline') || self.hasClass('delete')) {
					
					// Animations to do:
					// 1.- Show ongoing action on alert and status and change row color to danger, wait 5s
					
					showAlert("Deleting invitation...",'danger');
					self.parents('tr').addClass('danger');
					self.parents('tr').children('.status').text('Deleting invitation...');
					
					// 2.- Delete row (for mock up, just hiding it...)
					
					setTimeout(function(){
						self.parents('tr').hide('slow');
					},5000);
					
					self.parents('.btn-group').children('.dropdown-toggle').dropdown('toggle');
					return false;
					}
					
				if (self.hasClass('stop')) {
					
					// Careful with this one:
					// If we stop sharing a received accepted invitation, it should have the same
					// effect as if we had declined it in the firs place. For a more simpler mock up,
					// I'm implementing all stop actions as the action for sent invitations.
					// Remember, as said in the first IF for 'accept' action, there are more things happening:
					// Like changing the items in the dropdown menu when the status of the invitation
					// changes...
				
					// Animations to do:
					// 1.- Show ongoing action on alert and status, wait 5 s
					
					showAlert("Removing sharing...",'warning');
					self.parents('tr').addClass('warning');
					self.parents('tr').children('.status').text('Removing invitation...');
					
					// 2.- Remove row (move it to Removed table), wait 1 s
					
					setTimeout(function(){
						$('.table-removed > tbody > tr:last').after(self.parents('tr'));
						
						// 3.- Change status to finished action and row color to default
						
						setTimeout(function(){
							self.parents('tr').removeClass('danger');
							self.parents('tr').children('.status').text('Removed 10 s ago');
						},1000); 
					},5000);
					self.parents('.btn-group').children('.dropdown-toggle').dropdown('toggle');
					return false;
					}
					
				if (self.hasClass('resend')) {
				
					// Also, careful with this one:
					// If I re-send a declined invitation (wich may be only found in the removed table)
					// this invitation should be moved to sent table. In this mock up, I'm just changing
					// status and alerting the user.
					// I'm showing the transition of how moving an invitation between tables
					// should behave in the 'stop sharing' action: basically, an element that is moved
					// from one table to another may stand out clearly throughout all the transition, so the
					// user is aware of what is happening.
				
					// animations to do:
					// 1.- Show ongoing action in alert and status and change row color to blue, wait 5 s
					
					showAlert("Re-sending invitation...",'info');
					self.parents('tr').addClass('info');
					self.parents('tr').children('.status').text('Re-sennding invitation...');
				
					// 2.- Change status to finished action and row color to default
					
					setTimeout(function(){
						self.parents('tr').children('.status').text('Re-sent 5 s ago');
						self.parents('tr').removeClass('info');
					},5000);
					
					self.parents('.btn-group').children('.dropdown-toggle').dropdown('toggle');
					return false;
					}
					
				if (self.hasClass('edit')) {
					$('#edit-invitation-modal').modal();
					self.parents('.btn-group').children('.dropdown-toggle').dropdown('toggle');
					return false;
					}
					
					
			});
			
			
			// Space after contacts, so user see how more contacts are added
			$('#space-after').height($('#space-after').width()/8);

			// functionality for show more/less buttons under tables
			
				// Show more only may be shown when there are 4 or more invitations,
				// hiding from the 4th. Once clicked, it should show all of them.
				// The order is defined by the timestamp of the status.
				
				
			$('.more').click(function(){
				self = $(this);
				self.fadeOut('fast',function(){
					self.next('.less').fadeIn('slow');
				});
				$('tr.excess').show('slow');
			});
			
			$('.less').click(function(){
				self = $(this);
				self.fadeOut('fast',function(){
					self.prev('.more').fadeIn('slow');
				});
				$('tr.excess').hide('slow');
			});
			
			
			// What to show when tables are empty?
			
			$('button.empty').click(function(){
				// empty every table
				$('table').hide();
				$('.more').hide();
				
				// show elements for when empty
				$('.show-on-empty').show();
				
				
			});
			
			// What to show when tables are empty?
			
			$('button.nothing').click(function(){
			
				$('table').hide();
				$('.more').hide();
				$('.sharing-subtitle').hide();
			});
			

        });
    </script>
	
	
</body>
</html>
